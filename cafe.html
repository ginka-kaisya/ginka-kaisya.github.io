<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>Masterpiece Cafe POV</title>
    <style>
        body { margin: 0; background: #0c0a09; overflow: hidden; display: flex; justify-content: center; align-items: center; height: 100vh; font-family: "Microsoft YaHei", sans-serif; }
        
        /* 1. 核心修复：添加 UI 覆盖层 */
        .ui-layer {
            position: fixed;
            top: 25px;
            left: 25px;
            z-index: 100;
        }

        /* 2. 模拟图片质感的像素按钮 */
        .back-btn {
            background: #a66a3a; /* 使用吧台同色系 */
            color: white;
            padding: 12px 20px;
            border: 4px solid #6b3e23;
            text-decoration: none;
            font-weight: bold;
            font-size: 14px;
            image-rendering: pixelated;
            display: inline-block;
            box-shadow: inset -4px -4px 0px #6b3e23, 0 5px 15px rgba(0,0,0,0.5);
            transition: transform 0.1s;
        }

        .back-btn:hover {
            background: #d48d56;
            transform: scale(1.05);
        }

        .back-btn:active {
            transform: scale(0.95);
            box-shadow: inset 4px 4px 0px #6b3e23;
        }

        canvas { 
            image-rendering: pixelated; 
            box-shadow: 0 0 150px rgba(0,0,0,0.9);
            background: #1a1412;
            border: 4px solid #2d241f;
        }
    </style>
</head>
<body>

<div class="ui-layer">
    <a class="back-btn" href="index.html">⬅ 返回樱花树</a>
</div>

<canvas id="masterCanvas" width="1000" height="1000"></canvas>

<script>
    const canvas = document.getElementById('masterCanvas');
    const ctx = canvas.getContext('2d');
    const S = 4; 
    let frame = 0;

    const COLORS = {
        BG_DARK: '#1a1412',
        TABLE: '#a66a3a', TABLE_LIGHT: '#d48d56', TABLE_SHADOW: '#6b3e23',
        CUP: '#f2e8cf', CUP_SHADOW: '#bd9a7a',
        COFFEE: '#2d1810',
        STEAM: 'rgba(230, 230, 230, 0.4)'
    };

    function p(x, y, w, h, c) {
        ctx.fillStyle = c;
        ctx.fillRect(x * S, y * S, w * S, h * S);
    }

    function drawDither(x, y, w, h, c1, c2, density) {
        for(let i=0; i<w; i++) {
            for(let j=0; j<h; j++) {
                p(x+i, y+j, 1, 1, Math.random() > density ? c1 : c2);
            }
        }
    }

    function render() {
        frame++;
        ctx.clearRect(0, 0, canvas.width, canvas.height);

        // 绘制背景与吧台 (同步图片质感)
        p(0, 0, 250, 250, '#2d1b14');
        p(0, 80, 250, 40, '#1a1412');
        drawDither(0, 120, 250, 130, COLORS.TABLE, COLORS.TABLE_SHADOW, 0.8);

        // 绘制咖啡杯 (POV 第一视角)
        const cx = 125, cy = 180;
        ctx.fillStyle = 'rgba(0,0,0,0.4)';
        ctx.beginPath();
        ctx.ellipse(cx*S, (cy+15)*S, 40*S, 10*S, 0, 0, Math.PI*2);
        ctx.fill();

        p(cx-35, cy+10, 70, 8, COLORS.CUP_SHADOW);
        p(cx-32, cy+8, 64, 5, COLORS.CUP);
        p(cx-22, cy-25, 44, 40, COLORS.CUP_SHADOW);
        p(cx-20, cy-25, 40, 38, COLORS.CUP);
        p(cx+18, cy-15, 10, 15, COLORS.CUP_SHADOW);
        p(cx+20, cy-12, 6, 9, COLORS.BG_DARK);
        p(cx-15, cy-20, 30, 5, COLORS.COFFEE);

        // 动态蒸汽效果
        for(let i=0; i<12; i++) {
            let time = (frame * 0.02 + i * 0.5) % 2;
            let sy = cy - 30 - (time * 60);
            let sx = cx + Math.sin(frame * 0.05 + i) * 8;
            let size = 2 + time * 4;
            let alpha = (1 - time/2) * 0.5;
            ctx.fillStyle = `rgba(255, 255, 255, ${alpha})`;
            p(sx - size/2, sy, size, size, ctx.fillStyle);
        }

        // 环境光影滤镜
        let grad = ctx.createRadialGradient(cx*S, cy*S, 20*S, cx*S, cy*S, 200*S);
        grad.addColorStop(0, 'rgba(255, 200, 100, 0.2)');
        grad.addColorStop(1, 'rgba(0, 0, 0, 0.4)');
        ctx.fillStyle = grad;
        ctx.fillRect(0, 0, canvas.width, canvas.height);

        requestAnimationFrame(render);
    }
    render();
</script>
</body>
</html>
